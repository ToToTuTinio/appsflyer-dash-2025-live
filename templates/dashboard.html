function renderChartWithRetry(canvasId, renderFn, retries = 30) {
    const el = document.getElementById(canvasId);
    if (el && window.Chart) {
        // Use requestAnimationFrame to ensure DOM is painted
        requestAnimationFrame(() => {
            try {
                renderFn(el);
            } catch (e) {
                console.error("Chart.js error for " + canvasId + ":", e);
            }
        });
    } else if (retries > 0) {
        setTimeout(() => renderChartWithRetry(canvasId, renderFn, retries - 1), 200);
    } else {
        console.warn("Failed to render chart for", canvasId);
    }
} 